# IT历史上的今天
## AI驱动的科技历史日更视频系统
### 商业可行性分析与技术架构白皮书（V4 落地演进版）

Date: 2026-02

---

# 1. 核心商业模式与 Idea 把关 (Idea Validation)

## 1.1 项目重新定义
本项目**不是**一个“每日去网上找素材”的简单搬运号，它本质上是一个 **“预构建科技历史数据库 + 自动化内容生成引擎”**。
- **核心思想**：前期一次性构建90%以上的历史事件数据库，后续只做生动化、视频化的生成和分发。每日运行的只是“生成引擎”。

## 1.2 优势与机会 (Pros & Opportunities)
1. **内容生命周期极长（长尾效应）**：历史事件是不会过期的资产。一年前做的“乔布斯发布iPhone”，明年同一天稍微换个角度依然能发。
2. **高度结构化，易于AI自动化**：事件数据结构固定（时间、地点、人物、事件、影响），是最适合大模型进行批量化“升维降维”重写的数据模板。
3. **沉淀核心资产**：哪怕短视频平台算法变化，积累下来的“IT历史数据库”可以直接转化为网站、小程序、API甚至出版物。

## 1.3 核心挑战与应对策略 (Risks & Mitigations)
1. **【痛点】IT历史先天枯燥，缺乏“网感”**
   - *对策*：在脚本生成（LLM Prompt）中，必须强制引入“故事冲突”和“黄金三秒”。不要记流水账。例如：不要说“1995年今天Java发布”，要说“三十年前的今天，一个差点夭折的项目，最终杀死了无数竞争对手统治了后端世界”。
2. **【痛点】视觉素材匮乏**
   - 早期的IT事件（如70-80年代）缺乏高清视频和图片。
   - *对策*：利用高质量的动态数据可视化（如极简风格的时间轴UI动画）、代码模拟打字效果、以及利用 AI 绘图（Flux/Midjourney）生成具有赛博朋克或复古极客风格的配图，来拉高视觉质感。
3. **【痛点】受众偏窄的变现难题**
   - *对策*：定位明确的ToB和泛科技爱好者。变现路径可规划为：科技大厂公关/周年庆定制视频推广、IT人群的知识付费（如《计算机简史》体系化课程）、售卖结构化API数据。

---

# 2. 技术选型与方案预研 (Tech Selection & Pre-research)

为实现 “90%以上的自动化比例”，技术栈必须兼顾**稳定性**与**视觉展示上限**。

## 2.1 推荐技术栈选型表

| 层面 | 推荐技术组件 (2026最新) | 理由 / 核心作用 |
| --- | --- | --- |
| **工作流调度** | **n8n / Gumloop / Activepieces** | n8n依然稳定；Gumloop专注于AI Agent编排；Activepieces是现代且极易用的开源替代。用于串联“取数据->查LLM->生图->成片”流程。 |
| **数据库** | **PostgreSQL (加 pgvector)** | 高可靠。pgvector为后期引入RAG（自动根据多篇事件写深度文章）打基建。 |
| **文本生成(LLM)** | **Claude 4.5 Sonnet / GPT-5.2 / DeepSeek V3.2** | 2026年旗舰：Claude 4.5 故事讲述最强；GPT-5.2 全能均衡；DeepSeek V3.2 具有极高的数据处理性价比。 |
| **语音合成(TTS)** | **XTTS-v2 / ChatTTS / FishAudio-S1** | 2026开源开源主力：XTTS-v2音色克隆极佳；ChatTTS充满播客对话呼吸感；FishAudio-S1在情绪表达上极具表现力。 |
| **图像生成(AI)** | **Flux1.1-Pro / Midjourney V6** | 为历史事件生成一致风格的高质量配图（如复古报纸风、赛博极客风）。 |
| **视频AI与渲染**| **Remotion (模板渲染) + Kling 2.6 / Sora 2 / LTX-2 (视频素材)** | 终极组合：调用最新AI视频大模型（如Kling 2.6或开源4K的LTX-2）生成短动态片段，最终由 **Remotion (React代码)** 将片段、音频、字幕包装成极高质量的UI动画出片。 |

---

# 3. 核心生产与调度流水线预研方案 (Pipeline Design)

为了实现“每天早上8AM准时发布”的目标，流水线必须进行**异步解耦设计**。视频绝对不能在当天早上临时生成，以防止API中断或生成失败导致断更。

推荐策略：**“T+3” 影子生产模式**（即今天生产三天后发布的视频），并结合定时任务（Cron）和工作流引擎（n8n/Gumloop/Activepieces）串联。

## 3.1 阶段一：历史数据库构建（核心冷启动方案展开）

这是整个项目最核心的“数字资产”，本阶段建议投入2-3周时间，采用 **“多源定向爬取 -> 大模型清洗提纯 -> 入库评估与人工校验”** 的三步走策略。

### 1️⃣ 数据源定义与定向采集 (Scraped Raw Data)
*   **开源库历史库**：调用 GitHub REST API，获取拥有 `100k+ Stars` 的顶级开源项目（如 Linux, React, Docker）的第一次 Commit 日期或 v1.0 Release 日期。
*   **维基百科结构化采集**：利用 Python 库 `wikipedia-api` 或直接解析页面（如 "Timeline of computing", "List of programming languages" 等词条），按年份提取事件列表。
*   **科技新闻与创投归档**：通过 Hacker News API 或 TechCrunch 的 RSS 历史归档，猎取过去 15 年间，点赞数或热度极高的科技大厂“发布/收购/倒闭/裁员/诉讼”类大事件。
*   **执行与存储**：推荐使用 Python 的 **Crawlee** 框架或 **Scrapy**。将抓取到的非结构化或半结构化 HTML/文本直接存入本地 JSONL 文件或 MongoDB，**不在这里做复杂的正则抽取**，全部交给下一步的大模型。

### 2️⃣ 大模型数据提纯与打分 (LLM Processing)
这是过去爬虫做不到的环节，现利用 LLM 极低成本将“脏数据”变为“高净值数据”。
*   **文本清洗批处理**：编写 Python 脚本，读取上一步的 MongoDB 未清洗文本块，并发调用 **DeepSeek V3** (由于其 API 价格极低且推理极强)。
*   **强制 JSON 输出 Prompt 设计**：
    > “你是一个IT历史学长，请从以下抓取文本中提取科技事件。忽略非科技事件。严格按此JSON格式输出：`{"year": 1995, "month": 5, "day": 23, "title": "Java语言首次公开发布", "summary": "Sun Microsystems 在 SunWorld 会议上正式发布 Java 1.0.", "category": "ProgrammingLanguage", "importance_score": 9}`。如果只有年份没有月和日，则输出 `null` 或者过滤它。评分基准：改变行业格局满分10分，普通软件更新3分。”
*   **清洗机制**：如果 LLM 返回的日期信息缺失（如只有年，没有月日），程序则判定为“劣质数据”，直接记录日志并丢弃。

### 3️⃣ 入库、去重与丰富化 (Storage & Enrichment)
*   **数据去重整合**：将大模型提取的规范化 JSON 数据批量写入 **PostgreSQL** 的草稿表 (`events_draft`)。由于维基百科和 GitHub 可能会抓到同一个事件，按 `(month, day, year, title)` 建立唯一索引或计算相似度进行去重。
*   **深度背景扩写 (Enrichment)**：对于 `importance_score >= 8` 的顶级大事件（即有潜力做爆款视频的事件），再自动化调用一次 **Claude 4.5 Sonnet**，生成一段深度 `rich_context`（包含事件发生的戏剧性背景、当时媒体评价、深远影响），一并存入数据库，作为未来视频脚本的“养料基地”。
*   **人工校验后台 (Human-in-the-loop)**：运营使用 Retool 或 Metabase 快速搭建出的轻量级后台页面，浏览这 5000+ 条数据，对极少数被 LLM 误判的重大历史进行微调，最终把数据推送到正式表 `events_production`，此时冷启动结束。

## 3.2 阶段二：自动化生成流水线 (生产与调度引擎)

整条生产线建议分为 4 个独立的 Job 服务，通过 n8n 或 Airflow 串联在云服务器（如 AWS EC2 / 阿里云 ECS）上执行。

### ✨ Step 1: 脚本与素材生成 Job (T-3 晚 10:00 触发)
*   **任务目标**：根据三天后的日期，从数据库抽取最优质事件，并生成所有文字和静态素材。
*   **执行环境**：云服务器（普通 CPU 机器即可），运行 n8n 工作流。
*   **核心技术**：
    *   读取 DB: `SELECT * FROM events WHERE month=本月 AND day=(今日+3) ORDER BY importance_score DESC LIMIT 1`
    *   调用 LLM (Claude 4.5 Sonnet): 输入事件信息，强制按固定 JSON 格式返回视频脚本（包含前3秒 Hook、正文、反思结论）和 5 个分镜的画面提示词（Image Prompts）。
    *   调用 TTS (ChatTTS / CosyVoice API): 将生成的口播稿转录为高质量音频(`.wav`)，并获取字级别时间戳(`.json`字幕文件资源)。
    *   调用 生图模型 (Flux1.1-Pro API): 依据 LLM 给出的画面提示词并发请求，生成 5 张复古科技感的背景图片(`.jpg`)。
*   **本步产出物**：打成一个独立的 `Assets ZIP 包`（内含 1份文案+1份音频+1份字幕+5张图片），存入云存储服务（如 AWS S3 / 阿里云 OSS）。

### ✨ Step 2: 视频渲染与打包 Job (T-3 晚 10:30 触发)
*   **任务目标**：将准备好的素材包渲染成最终的酷炫成片。
*   **执行环境**：云端渲染服务器或 Serverless 容器引擎（如 AWS Lambda / Vercel）。
*   **核心技术**：**Remotion (基于 React 的代码化视频渲染引擎)**。
    *   接收到工作流触发后，Remotion 脚本下载上一步的 `Assets ZIP 包`。
    *   将图片传入预写好的 CSS 动效组件（实现 Ken Burns 平滑拉近效果）。
    *   通过代码精准对齐字幕 `.json` 和音频 `.wav`，生成科技风的动态打字机字幕。
    *   添加背景音乐（BGM）和转场音效。
    *   执行 `npx remotion render` 通过底层 FFmpeg 渲染出片。
*   **本步产出物**：一个 1080P/4K 高清 MP4 视频文件，并推送到 OSS，同时发飞书/钉钉企微通知包含预览链接给运营人员。

### ✨ Step 3: 人工审核缓冲期 (T-2 至 T-1)
*   **任务目标**：人工确认成片质量，规避 AI 严重幻觉或政治敏感内容。
*   **执行方式**：运营使用手机打开飞书/钉钉，点击播放视频。如果发现明显错误，可点击钉钉卡片上的“退回重做”按钮（触发另一套重新挑选历史事件的备用流）。无误则无需干预。

### ✨ Step 4: 跨平台定时发布 Job (发布日早上 08:00 准时触发)
*   **任务目标**：将经过审核的 T-3 生产的视频，全网分发。
*   **执行环境**：云服务器端运行 RPA 框架或直接对接官方 API。
*   **核心技术**：
    *   部分支持 API 发布的平台（如 YouTube Data API v3）。
    *   不支持官方 API 发布的平台（如抖音、小红书）：推荐使用 **Playwright / Selenium + 浏览器指纹隔离技术** 的 RPA 脚本自动登录创作者后台进行定时上传。
    *   附加：结合 LLM 生成各个平台的特色标题和 Hashtags (如 小红书标题加 emoji，YouTube 加详细描述)。
*   **最终效果**：早上 8:00，今天历史上的重大IT事件，自动出现在全网受众的手机里。

---

# 4. 数据表结构设计与重要性算法

## 4.1 核心数据表: events

| 字段 | 类型 | 说明 |
|------|------|------|
| `id` | int | 主键 |
| `month` | int | 发生月份 (用于索引) |
| `day` | int | 发生日期 (用于索引) |
| `year` | int | 发生年份 |
| `title` | text | 事件标题 (如 "Linux内核首次发布") |
| `category` | varchar | 类型 (如：Person, Product, Company, Security, OpenSource) |
| `importance_score` | float | 核心！决定了哪条数据被拍成视频 |
| `rich_context` | text | 完整的维基背景或深度资料，供LLM生成时参考 |

## 4.2 重要性评分模型 (Importance Score)

由 LLM (如 DeepSeek) 进行打分初筛 (1-10分)，权重参考：
- **技术转折点 (30%)**：是否是某项被公认的底层核心技术的诞生（如C语言、TCP/IP）。
- **商业影响力 (25%)**：是否造就了千亿美元市值的巨头或破产（如苹果发布大麦克、雅虎衰退）。
- **社会与流行度 (25%)**：普通大众是否有感知（如Windows 98蓝屏、熊猫烧香病毒）。
- **戏剧性/故事性 (20%)**：是否存在显着的对抗与意外（如黑客攻防、巨头诉讼、天才的陨落）。

---

# 5. 内容规格参数与工作量评估 (Content Spec & Effort Estimation)

## 5.1 视频时长与内容密度的权衡
**核心结论：对于每日更新的内容，强推 60-90秒是最佳甜点区。**
不要试图做 5 分钟的深度科普纪录片。因为：
1.  **容错率**：AI生成的图文和配音在 1 分钟内能保持高度的一致性和新鲜感，拉长到 3 钟以上则极易暴露“AI感”，让人视觉疲劳。
2.  **渲染成本**：每天渲染 5 分钟的 Remotion 动效或者调用 Sora 生成长视频成本极高。
3.  **完播率与算法**：无论是在 YouTube Shorts 还是 TikTok、视频号，1分钟时长的完播率和转评赞转化率是最利于撬动初始流量推荐的。

**如果有且仅有当年爆款事件（如第一代iPhone发布，评分>=9分）**：程序可以自动切换分支，调取长文案Prompt，生成一条 **2-3分钟** 的“周末特别版/深度版”。

## 5.2 60秒视频的内容规格标准 (BOM清单)
一条标准的 60 秒“IT历史今天”短视频，需要以下资产组装：

| 资产类型 | 数量 / 长度 | 制作说明与要求 |
| :--- | :--- | :--- |
| **口播字数** | **220 - 280 字** | 正常成人语速约 250字/分钟。<br>• 黄金3秒Hook (20字)<br>• 历史情境还原 (100字)<br>• 核心事件突破 (80字)<br>• 对当今的启发/金句结尾 (50字)。 |
| **主视觉图片** | **6 - 10 张 (混合策略)** | **建议采用 70% 真实历史图片 + 30% AI辅助绘图** 的混合策略。<br><br>**1. 真实网络图片 (自动化获取)**：<br>在爬虫阶段抓取人物真实照片（如年轻的乔布斯）。这部分图极具史料价值。<br>**⚠️实操踩坑预警 (MVP复盘)**：Wikipedia Commons 的 API 对爬虫程序有严格的反扒和并发限制(Error 429)。在长效 n8n 服务中，必须配置随机 `User-Agent`，并在每次抓取间增加延迟，否则会自动阻断甚至返回 60 bytes 的错误页面导致后续渲染崩溃。<br><br>**2. AI图像 (风格补充计算/全境兜底)**：<br>当真实图片抓取被墙，或需要表达“抽象概念”时，由 LLM 生成精确 Prompt 交给 Flux 生成一张高度赛博风格的 AI 大图进行补充与“兜底”。为了消除两者的违和感，必须在前端视频渲染(Remotion)层统一挂载“复古纪录片叠加像素滤镜”(`filter: sepia(0.3) contrast(1.1) grayscale(0.2)`)。 |
| **音频轨道** | **2+ 轨** | 1 条极简清爽男声/女声播客音轨；<br>1 条背景环境音（Lo-Fi, Synthwave 等无版权音乐）。<br>**💡 成本控制方案 (MVP复盘)**：不必一上来就开通 CosyVoice 商业 API（约1元/万字）。在 MVP 或起步阶段，强烈建议通过 Python `edge-tts` 或 n8n 社区节点，直接白嫖 **Microsoft Azure (Edge) Cloud TTS** 开放接口（如模型 `zh-CN-YunxiNeural`），**完全免费且无额度上限**，发音极具短视频能量网感，实测完美兼容。 |
| **视觉动效(UI)**| **全局套接** | 贯穿全片的 Remotion 时间轴动态进度条、随音频大小弹跳的机械波纹底纹、以及复古打字机或终端输入风格的字幕呈现。 |

## 5.4 AI 能否全视角导演整个视频？（Remotion 管线原理解析）

**答案是：完全可以，而且必须这么做。**

我们不要试图让 AI “直接合成一个 MP4”给你（那样无法控制细节、字幕和卡点）。正确的做法是：**让 AI (LLM) 充当“总导演”，输出一份结构化的“分镜剧本(JSON)”，然后让代码 (Remotion) 充当“剪辑师”去严格拉片。**

具体的全自动化联动流程如下：

1.  **AI 总导演 (LLM 规划分镜)**：
    Prompt 让 LLM 输出不仅是文案，而是带有数组维度的结构。
    ```json
    {
      "audio_script": "1995年的今天，Java正式发布，它差一点就叫Oak...",
      "scenes": [
        {"timestamp_start": 0, "timestamp_end": 5, "image": "java_logo.jpg", "animation": "zoom_in_slow", "caption": "1995年 Java诞生"},
        {"timestamp_start": 5, "timestamp_end": 12, "image": "james_gosling.jpg", "animation": "pan_left", "caption": "Java之父: 詹姆斯·高斯林"}
      ]
    }
    ```
2.  **语音对齐算法 (TTS Word-level Timestamps)**：
    我们将 `audio_script` 丢给 TTS（如 ChatTTS / 阿里 CosyVoice，因为它们支持返回拼音或单字的精确时间戳）。TTS不仅返回一段 `audio.wav`，还会返回一个时间戳数组（例如：词语“1995年”出现在 0.00秒至0.45秒，“Java”出现在0.90秒至1.20秒）。
3.  **Remotion 极客视频合成引擎 (终极绝杀)**：
    这步最核心。我们在 Remotion（一个基于 React/TypeScript 的视频框架）提前写好几个 CSS/React 组件（例如 `<TypeWriterText />`, `<KenBurnsImage />`）。
    Remotion 会读取上面两个步骤产出的 JSON 和 Wav：
    *   **何时出什么图**：直接读取 `scenes` 数组里的秒数，在对应的 `frame` 挂载对应的图片组件和 `zoom_in_slow` 的 CSS 缩放动画。
    *   **何时出什么字**：读取 TTS 的字级别时间戳（精准到几毫秒），然后利用 `<Sequence>` 组件让字幕像卡拉OK一样精准的一个字一个字蹦出来，实现完美的嘴型/声音卡点。

**总结**：在这个架构下，AI 不需要去手动“剪”视频。AI 只需要负责“思考和规划”，输出极其精确的坐标和时间戳，剩下的脏活累活，你的代码会在云端服务器上用 1 分钟的时间渲染得严丝合缝。

本项目属于典型的 **“难在基建，赢在后期”**。

| 模块 | 难度 | 预计人天(单人) | 技术难点与踩坑预警 |
| :--- | :--- | :--- | :--- |
| **阶段一: 爬虫与DB冷启动** | 🌟🌟 | **10 - 14 天** | 难度不大，全是脏活。**难点**：在于如何控制 LLM 清洗时不出幻觉（它可能把发布年份瞎编）。需要写评测脚本对输出的JSON进行类型强校验。 |
| **阶段二: Remotion 视觉渲染管线** | 🌟🌟🌟🌟🌟 | **15 - 20 天** | **这是本项目成败的核心。** 如果做出来的视频像廉价 PPT，项目就死了。你需要用 React 和 CSS 手写出极其丝滑的 UI 动画、卡点转场、高级排版。并解决大量图片异步加载、字体渲染等 Web 技术落地视频的难题。 |
| **阶段三: n8n 自动化流串联** | 🌟🌟🌟 | **5 - 7 天** | **难点**：处理各种不可控的 API 超时问题。比如 Flux 生图经常 502，如何做重试机制？TTS 生成时间戳数组对不齐中文字符怎么修复？ |
| **阶段四: RPA 自动发布与运维** | 🌟🌟🌟🌟 | **7 - 10 天** | 极不稳定的模块。抖音、小红书后台经常变动 DOM 结构或加验证码，维护 Playwright 脚本心智负担很重，建议初期手动群内点“确认发布”即可。 |
| **总计** | | **约 1.5 - 2 个月**| 一个熟练的 全栈+AI 工程师的全量预估。 |

## 6. 工具链授权与运营成本分析 (Licenses & Costs)

针对商业化落地，这里详细拆解你所关心的“哪些软件需要付费”以及预期的日常消耗：

### 6.1 核心框架授权 (软件采购层面)

**核心结论：对于独立开发者或小团队起步阶段，初期几乎是 0 软件授权费的。**

*   **Remotion (视频渲染框架)**：
    *   **授权模式**：它**不是**传统的“商业软件”（如 Adobe Premiere 需要按月订阅），它是一个基于代码的开源底层库。
    *   **免费额度**：在他们的许可证 (Company License) 下，只要你的公司或个人项目的**年收入不超过 $2,000 USD（约 1.4万 人民币）**，并且你**不是**构建一个允许别人输入内容自动生成视频的“ SaaS 产品”（你的用途是内部自用发布到抖音/YouTube），你就可以**完全免费**用于商业目的。
    *   *注*：如果账号做起来了，年收入超标，购买一个正版 License 大约几百美元，完全可以覆盖成本。
*   **n8n / Activepieces (工作流引擎)**：
    *   如果使用官方云托管（Cloud），需要交月费（$20起步）。
    *   但它们都提供开源自建版，只要你会把它部署到自己的云服务器上，**完全免费**商用。
*   **PostgreSQL / Playwright (RPA)**：
    *   纯开源，**完全免费**商用。

### 6.2 日常动态消耗 (API 调用成本层面)

在这个架构中，真正的成本不在买软件，而在于“流水线运行时的水电费”（各大 AI 大模型的 API 调用）。以每天生产 1 条（每月 30 条）的峰值来预估：

| 能力模块 | 推荐 API (性价比优选) | 单次调用成本预估 | 月度总账单预估 (30条) |
| :--- | :--- | :--- | :--- |
| **大语言模型 (清洗+脚本)** | **DeepSeek V3 / Claude 3.5 Sonnet** | DeepSeek 几近免费 ($0.001) <br>Claude 较贵 ($0.015) | **< $1.00** |
| **生图模型 (历史图补位)** | **Flux1.1-Pro (通过 fal.ai)** | 每张图约 $0.05，单日生 3张 = $0.15 | **$4.50** |
| **语音合成 (TTS)** | **阿里 CosyVoice / ChatTTS 调优版** | CosyVoice前置免费额度极高。独立部署开源模型几乎免费 (仅消耗云端算力)。 | **$0 - $5.00** |
| **生视频 (如有动画需求)** | **Kling 2.6 / Luma Ray** | 每 5 秒视频耗费约 $0.1 - $0.3 不等 | **$0 (如纯用图片运镜)** 到 **$15.00** |
| **云端服务器 (运行框架)** | **VPS (如 Linode/DigitalOcean)** | 租一台基础型 2GB RAM Linux 跑 n8n 和 DB | **$10.00 (固定)** |
### 6.3 硬件资产要求：我需要买 GPU 显卡吗？

**核心结论：完全不需要！不建议初期自己买卡部署。**

本技术架构的设计理念是 **“轻量化编排 + 云端 API”**，因此对你的本地硬件要求极低。

*   **你的开发机/办公电脑**：一台普通的 Mac 或 Windows 笔记本即可（只要能跑得起 Node.js 和 Python 环境就能开发调试 Remotion 模板和爬虫）。
*   **你的部署服务器（云端）**：只需要租用一台最便宜的 **纯 CPU 云服务器**（例如 2核 4G 内存即可），用来跑 n8n 工作流、Cron 定时任务和 PostgreSQL 数据库。
*   **为什么不需要 GPU？**：
    *   **LLM 推理**：全部调用 DeepSeek / Claude 的云端 API。
    *   **图像生成**：全部调用 Midjourney / Flux (fal.ai) 的云端 API。自己花 2 万块钱买张 4090 跑生图，一天只跑几张甚至几十张图，其硬件折旧费远超几美元的 API 调用费。
    *   **语音 TTS**：使用云端服务，或找一个便宜的按量计费的 GPU 容器服务（如 RunPod）临时启停即可。
    *   **视频渲染**：Remotion 使用 CPU 进行 FFmpeg 渲染。虽然 GPU 渲染快，但对于 1 分钟时长的短视频，普通云服务器的 CPU 在 1-2 分钟内也能完全渲染完毕。所以为了“每日一更”的低频节奏特意上 GPU 是极其不划算的。

> 这个业务模式是一个典型的 **“调参师与架构师”** 的活，你只需要利用各大云厂商的算力基建，把自己当成一个“调度中心”即可。

---

# 7. 最终结论与执行路标
